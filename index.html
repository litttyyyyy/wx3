<!DOCTYPE html>
<html lang="search">
<head>
  <meta charset="UTF-8" http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <title>search</title>

</head>
<body>
<h1 id="search">qweqwe</h1>
<script type="text/javascript" src="http://res2.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
<script src="http://cdn.bootcss.com/zepto/1.1.7/zepto.min.js"></script>
<script type="text/javascript">
    //set flag,IS voicing?
    var isRecord=false;
    $('#search').click(function (){
      if(!isRecord) {
        //start voice
        wx.startRecord();
        isRecord=true;
      }else {
        //end voice
        wx.stopRecord({
          success: function (res) {
            //get media_id
            var localId = res.localId;
            console.log(localId);
            wx.translateVoice({
              localId:localId , // 需要识别的音频的本地Id，由录音相关接口获得
              isShowProgressTips: 1, // 默认为1，显示进度提示
              success: function (res) {
                alert(res.translateResult); // 语音识别的结果
              }
            });
            isRecord=false;

          }
        });
      }
    })
</script>
</body>
</html>